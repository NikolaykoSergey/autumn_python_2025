# todo: Шифр Цезаря
# Описание шифра.
# В криптографии шифр Цезаря, также известный шифр сдвига, код Цезаря или сдвиг Цезаря,
# является одним из самых простых и широко известных методов шифрования.
# Это тип подстановочного шифра, в котором каждая буква в открытом тексте заменяется буквой на некоторое
# фиксированное количество позиций вниз по алфавиту. Например, со сдвигом влево 3, D будет заменен на A,
# E станет Б, и так далее. Метод назван в честь Юлия Цезаря, который использовал его в своей частной переписке.
#
# Задача.
# Считайте файл message.txt и зашифруйте  текст шифром Цезаря, при этом символы первой строки файла должны
# циклически сдвигаться влево на 1, второй строки — на 2, третьей строки — на три и т.д.
# В этой задаче удобно считывать файл построчно, шифруя каждую строку в отдельности.
# В каждой строчке содержатся различные символы. Шифровать нужно только буквы кириллицы.
from autumn_python_2025.task21 import result


def caesar_shift_russian(text, shift):
    result = ""
    for char in text:
        if 'А' <= char <= 'Я':  # Заглавные буквы
            result += chr((ord(char) - ord('А') + shift) % 32 + ord('А'))
        elif 'а' <= char <= 'я':  # Строчные буквы
            result += chr((ord(char) - ord('а') + shift) % 32 + ord('а'))
        else:
            result += char  # Не кириллический символ не меняется
    return result
# Чтение файла и шифрование построчно
with open("messenge.txt", "r", encoding="utf-8") as f:
    lines = f.readlines()

encrypted_lines = []
for i, line in enumerate(lines):
    shift = i + 1  # Сдвиг увеличивается с каждой строкой
    encrypted_line = caesar_shift_russian(line.rstrip("\n"), shift)
    encrypted_lines.append(encrypted_line)

# Запись зашифрованного текста в новый файл
with open("encrypted_message.txt", "w", encoding="utf-8") as f:
    for line in encrypted_lines:
        f.write(line + "\n")

print("Файл зашифрован и сохранён как encrypted_message.txt")